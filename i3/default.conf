#################################################################
## CONFIGURAÇÕES BÁSICAS PARA O GERENCIADOR DE JANELAS I3.     ##
## PROJETO: (https://github.com/jcmljunior/window-manager-i3)  ##
## AUTOR: JULIO CESAR <jcmljunior@gmail.com>                   ##
#################################################################

# DEFINE AS TECLAS MODIFICADORAS.
# Mod1<Alt> | Mod4<Super>
set $MODKEY1 Mod4
set $MODKEY2 Mod1

# DEFINE A TECLA PARA MOVER JANELAS FLUTUANTES.
floating_modifier $MODKEY1

# DEFINE O TAMANHO PADRÃO PARA AS BORDAS DE JANELA.
# VALORES: normal|none|pixel
default_floating_border pixel 3

# OCULTA O ESPAÇAMENTO DA BARRA DE ROLAGEM.
# VALORES: none|vertical|horizontal|both|smart
hide_edge_borders none

# DEFINE O MODELO DE JANELA PADRÃO.
# VALORES: default|stacking|tabbed
# DEFINE O EMPILHAMENTO DE JANELAS LADO A LADO.
# DEFINE O EMPILHAMENTO DE JANELAS EM ABAS HORIZONTAL.
# DEFINE O EMPILHAMENTO DE JANELAS EM ABAS VERTICAL.
workspace_layout tabbed

# DEFINE O ALINHAMENTO DO TÍTULO DE JANELA.
# VALORES: left<Esquerda>|center<Centralizado>|right<Direita>
title_align center

# DEFINIÇÕES DE FONTE PADRÃO.
font pango:Montserrat 10.5

# DEFINE A ALTERAÇÃO DE JANELAS COM BASE NA POSIÇÃO DO CURSOR.
# VALORES: true|false
focus_follows_mouse false

# DEFINE A EXIBIÇÃO DE JANELAS POP-UP NO MODO DE TELA CHEIA.
# VALORES: smart|ignore|leave_fullscreen
popup_during_fullscreen smart

# DEFINE O SUPORTE PARA MULTIPLOS MONITORES.
# VALORES: yes|no
force_xinerama no

# ATIVA O I3-GAPS
smart_gaps on
smart_borders on

# DEFINE O ESPAÇAMENTO ENTRE JANELAS. I3-GAPS
gaps inner 6
gaps outer 6

#################################################################

client.focused            #81A1C1 #5e81ac #eceff4 #ebcb8b 
client.focused_inactive   #3B4252 #3B4252 #D8DEE9 #292d2e 
client.unfocused          #3B4252 #3B4252 #D8DEE9 #292d2e
client.urgent             #a3be8c #bf616a #eceff4 #292d2e
client.placeholder        #c6c6c6 #1f1f1f #D8DEE9 #828282 #828282 
client.background         #2E3440 

#################################################################
# REMAKE I3 SETTINGS
#################################################################

set $MENU i3-dmenu-desktop
set $MENU_OPTIONS --dmenu="dmenu -i -b -nb '#2E3440' -nf '#D8DEE9' -sb '#5e81ac' -sf '#ECEFF4'  -p 'run:'"
set $MENU_DEFAULT i3-dmenu-desktop

# DEFINIÇÕES DE TERMINAL PADRÃO.
set $TERM env LIBGL_ALWAYS_SOFTWARE=1 kitty
set $TERM_DEFAULT i3-sensible-terminal

# DEFINIÇÕES DE ÁREA DE TRABALHO.
set $WS01 1
set $WS02 2
set $WS03 3
set $WS04 4
set $WS05 5
set $WS06 6
set $WS07 7
set $WS08 8
set $WS09 9
set $WS10 10

# DEFINIÇÕES DE REDIMENCIONAMENTO DE JANELA.
mode "Ajuste de janela: Redimensionar" {
  bindsym Right resize shrink width 10 px or 10 ppt
  bindsym Up resize grow height 10 px or 10 ppt
  bindsym Down resize shrink height 10 px or 10 ppt
  bindsym Left resize grow width 10 px or 10 ppt
  
  bindsym Return mode "default"
  bindsym Escape mode "default"
}

# DEFINIÇÕES DE JANELAS EM ESTADO NORMAL.
mode "Ajuste de janela: Normal" {
  bindsym Up focus Up
  bindsym Left focus Left
  bindsym Right focus Right
  bindsym Down focus Down

  bindsym $MODKEY1+Up move up
  bindsym $MODKEY1+Left move left
  bindsym $MODKEY1+Right move right
  bindsym $MODKEY1+Down move down

  bindsym A focus parent, focus parent, focus parent, focus parent, focus parent, focus parent
  
  bindsym R mode "Ajuste de janela: Redimensionar"

  bindsym Q kill
  bindsym F4 kill

  bindsym Return mode "default"
  bindsym Escape mode "default"
}

# DEFINIÇÕES DE JANELA EM ESTADO FLUTUANTE.
mode "Ajuste de Janela: Flutuante" {
  bindsym Up focus Up
  bindsym Left focus Left
  bindsym Right focus Right
  bindsym Down focus Down

  bindsym $MODKEY1+Up move up 20 px
  bindsym $MODKEY1+Down move down 20 px
  bindsym $MODKEY1+Left move left 20 px
  bindsym $MODKEY1+Right move right 20 px

  bindsym $MODKEY1+C move absolute position center

  bindsym A focus parent, focus parent, focus parent, focus parent, focus parent, focus parent

  bindsym L mode "Ajuste de Modelo"

  bindsym Q kill
  bindsym F4 kill

  bindsym Return mode "default"
  bindsym Escape mode "default"
}

# DEFINIÇÕES DE MODELO DE JANELA.
mode "Ajuste de Modelo" {
  bindsym L layout default
  bindsym S layout stacking
  bindsym T layout tabbed

  bindsym V split v
  bindsym H split h
  bindsym O split toggle

  bindsym F floating toggle
  bindsym $MODKEY1+F fullscreen toggle

  bindsym $MODKEY2+W mode "Ajuste de Janela: Flutuante"

  bindsym Return mode "default"
  bindsym Escape mode "default"
}

# DEFINIÇÕES DE NAVEGAÇÃO.
mode "Navegação" {
  bindsym Left workspace prev
  bindsym Right workspace next

  bindsym 1 workspace number $WS01
  bindsym 2 workspace number $WS02
  bindsym 3 workspace number $WS03
  bindsym 4 workspace number $WS04
  bindsym 5 workspace number $WS05
  bindsym 6 workspace number $WS06
  bindsym 7 workspace number $WS07
  bindsym 8 workspace number $WS08
  bindsym 9 workspace number $WS09
  bindsym 0 workspace number $WS10

  bindsym $MODKEY1+1 move container to workspace $WS01, workspace $WS01
  bindsym $MODKEY1+2 move container to workspace $WS02, workspace $WS02
  bindsym $MODKEY1+3 move container to workspace $WS03, workspace $WS03
  bindsym $MODKEY1+4 move container to workspace $WS04, workspace $WS04
  bindsym $MODKEY1+5 move container to workspace $WS05, workspace $WS05
  bindsym $MODKEY1+6 move container to workspace $WS06, workspace $WS06
  bindsym $MODKEY1+7 move container to workspace $WS07, workspace $WS07
  bindsym $MODKEY1+8 move container to workspace $WS08, workspace $WS08
  bindsym $MODKEY1+9 move container to workspace $WS09, workspace $WS09
  bindsym $MODKEY1+0 move container to workspace $WS010, workspace $WS010

  bindsym $MODKEY1+W mode "Ajuste de janela: Normal"
  bindsym $MODKEY2+W mode "Ajuste de Janela: Flutuante"

  bindsym Return mode "default"
  bindsym Escape mode "default"
}

# DEFINIÇÕES DE CAPTURA DE TELA.
mode "Captura de Tela" {
  bindsym --release F exec \
    [[ -x "$(command -v flameshot)" ]] && flameshot gui && xdotool key enter || \
    [[ -x "$(command -v flatpak)" ]] && [[ -n "$(flatpak list --columns=application | grep -E "flameshot")" ]] && \
      flatpak run org.flameshot.Flameshot gui && xdotool key enter

  bindsym Return mode "default"
  bindsym Escape mode "default"
}

# DEFINE O TERMINAL.
bindsym $MODKEY1+Return exec $TERM || $TERM_DEFAULT

# DEFINE O MENU DE APLICAÇÕES
bindsym $MODKEY1+M exec $MENU $MENU_OPTIONS || $MENU_DEFAULT

# ALTERNA A VISIBILIDADE DA BARRA.
bindsym $MODKEY1+B bar mode toggle

# RECARREGA OS AJUSTES DO I3.
bindsym $MODKEY1+R exec i3 reload && i3 restart

# DEFINE O MODO DE AÇÕES PARA JANELA NORMAL.
bindsym $MODKEY1+W mode "Ajuste de janela: Normal"

# DEFINE O MODO DE AÇÕES PARA JANELA FLUTUANTE.
bindsym $MODKEY2+W mode "Ajuste de Janela: Flutuante"

# DEFINE O MODO DE AJUSTE DE MODELO NORMAL/FLUTUANTE.
bindsym $MODKEY1+L mode "Ajuste de Modelo"

# DEFINE O MODO DE AÇÕES PARA NEVEGAÇÃO DA ÁREA DE TRABALHO.
bindsym $MODKEY1+N mode "Navegação"

# DEFINE O MODO DE CAPTURA DE TELA.
bindsym $MODKEY1+S mode "Captura de Tela"

#################################################################

# DEFINE A POSIÇÃO DE CRIAÇÃO DE NOVAS JANELAS.
# VALORES: vertical|horizontal|toggle
# bindsym $MODKEY1+Shift+O layout toggle split

# DEFINE O CONTROLADOR MULTIMIDIA.
bindsym XF86AudioPlay exec playerctl play
bindsym XF86AudioPause exec playerctl pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous

# DEFINE OS AJUSTES DE SOM.
bindsym XF86AudioRaiseVolume exec amixer sset Master 10%+
bindsym XF86AudioLowerVolume exec amixer sset Master 10%-
bindsym XF86AudioMute exec amixer sset Master toggle
bindsym XF86AudioMicMute exec amixer sset Capture toggle

# AJUSTE DE BRILHO. (!!!)

#################################################################

# DEFINIÇÕES DE JANELA.
for_window [class=".*"] title_window_icon on, title_window_icon padding 3px
for_window [window_role="pop-up"] floating enable
for_window [window_role="GtkFileChooserDialog"] resize set 800 600, move absolute position center

#################################################################

bar {
 position top
 id top-bar
 mode dock
 hidden_state hide
 tray_output primary
 tray_padding 3
 font pango:Montserrat 10
 status_command i3status -c ~/.config/better-wm/i3/i3status.conf
 workspace_buttons yes
 workspace_min_width 20

 colors {
   background          #2E3440
   statusline          #ECEFF4
   separator           #434C5E
   focused_workspace   #81a1c1 #5e81ac #ECEFF4
   urgent_workspace    #994E55 #bf616a #ECEFF4
   inactive_workspace  #434C5E #3B4252 #D8DEE9
   binding_mode        #90728 #B48EAD #ECEFF4
 }
}

#################################################################

exec "~/.local/share/bin/up @autostart" 

